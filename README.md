# devil-in-the-fpga

Repo with **devil-in-the-fpga** artifacts:
* **./hardware:** custom FPGA logic    
* **./software:** firmware (ATF, Bao, etc) + VMs and test codes  

---
## -1. Install dependencies

Install Nix

```
curl -L https://nixos.org/nix/install | sh -s -- --daemon
```

---
## 1. Setup base environment

Clone this repo and cd to it:

```
git clone https://github.com/ESCristiano/devil-in-the-fpga.git
cd devil-in-the-fpga
```

---

## 2. "Build" Hardware

```
cd ./hardware
./build_design.sh
./save_artifacts.sh
```

---
## 3. "Build" Software

```
cd ./software
nix-build
```

And all the needed source and images will be automatically downloaded and built. 

---
## 4. Flash The SD Card

Plug the SD card and execute:

```
./result-8 #This script is generated by nix, that's why it has a strange name
```

---
## 5. Power Up the Board

Power up the system, stop the u-boot and insert the command:

```
fatload mmc 0 0x200000 bao.img; bootm start 0x200000; bootm loados; bootm go
```

You should see Bao running a dual-guest setup (either dual-baremetal or baremetal+linux). 

# Security-and-Privacy-2024-Coherent-Trojan-Paper
# Security-and-Privacy-2024-Coherent-Trojan-Paper
# Security-and-Privacy-2024-Coherent-Trojan-Paper
