.de  CW
.sp
.nf
.ft CW
..
.\" Process this file with
.\" groff -man -Tascii foo.1
.\"
.\" "verbatim" environment (from strace.1)
.de  CE
.ft
.fi
.sp
..
.\"
.\"*******************************************************************
.\"
.\" This file was generated with po4a. Translate the source file.
.\"
.\"*******************************************************************
.TH fakeroot 1 "5 October 2014" "Proyecto Debian" "Manual de Debian"
.\" Manpage by J.H.M. Dassen <jdassen@debian.org>
.\" and Clint Adams <clint@debian.org>
.SH NOMBRE
fakeroot \- ejecuta una orden en un entorno que falsea privilegios de
superusuario para la manipulaci칩n de ficheros
.SH SINOPSIS
\fBfakeroot\fP \fB[\-l|\-\-lib\fP \fIbiblioteca]\fP \fB[\-\-faked\fP \fIbinario\-faked\fP\fB]\fP
\fB[\-i\fP \fIfichero\-a\-cargar\fP\fB]\fP \fB[\-s\fP \fIfichero\-salvado\fP\fB]\fP
\fB[\-u|\-\-unknown\-is\-real ]\fP \fB[\-b|\-\-fd\-base ]\fP \fB[\-h|\-\-help ]\fP
\fB[\-v|\-\-version ]\fP \fB[\-\-]\fP \fB[orden]\fP
.SH DESCRIPCI칍N
\fBfakeroot\fP ejecuta una orden en un entorno donde parece que se tiene
permisos de superusuario para la manipulaci칩n de ficheros. 칔til para
permitir a usuarios crear archivos (tar, ar, .deb etc.) con ficheros con
permisos/propietarios de superusuario.  Sin \fBfakeroot\fP uno necesitar칤a
privilegios de superusuario para crear los ficheros constituyentes del
archivo con los permisos y propietario correctos, y despu칠s empaquetarlos, o
uno tendr칤a que construir los archivos directamente, sin usar el archivador.

\fBfakeroot\fP works by replacing the file manipulation library functions
(chmod(2), stat(2) etc.) by ones that simulate the effect the real library
functions would have had, had the user really been root. These wrapper
functions are in a shared library \fB/usr/lib/*/libfakeroot\-*.so\fP or similar
location on your platform.  The shared object is loaded through the
\fBLD_PRELOAD\fP mechanism of the dynamic loader. (See \fBld.so\fP(8))

Si pretende construir paquetes usando \fBfakeroot\fP, es aconsejable construir
primero el paquete fakeroot: la etapa "debian/rules build" tiene algunas
comprobaciones (la mayor칤a de ellas buscan fallos de versiones viejas de
fakeroot). Si estas pruebas fallan (por ejemplo, porque tiene ciertos
programas libc5 en el sistema), tambi칠n fallar치 la construcci칩n de otros
paquetes mediante fakeroot, pero de formas mucho m치s sutiles.

Adem치s, dese cuenta que es mejor no realizar la compilaci칩n de los binarios
bajo fakeroot. Especialmente configure y dem치s programas del estilo no se
comportan bien cuando el sistema se comporta de forma diferente a la
esperada. (o, de forma aleatoria, estos programas eliminan algunas variables
de entorno, algunas de las cuales necesita fakeroot).

.SH OPCIONES
.TP 
\fB\-l\fP \fIbiblioteca\fP, \fB\-\-lib\fP \fIbiblioteca\fP
Especifica una biblioteca envoltorio.
.TP 
\fB\-\-faked\fP\fI\ binario\fP
Especifica un binario alternativo a usar en vez de faked.
.TP 
\fB[\-\-]\fP\fI\ orden\fP
Cualquier orden que quieras ejecutar bajo fakeroot. Use \(oq\-\-\(cq si en la
orden tiene otras opciones que puedan confundir el an치lisis de las opciones
de fakeroot.
.TP 
\fB\-s\fP\fI\ fichero\-salvado\fP
Guarda el entorno fakeroot en fichero\-salvado al salir. Este fichero puede
usarse para restaurar el entorno m치s tarde usando \-i. Sin embargo, este
fichero fallar치 y fakeroot se comportar치 de forma extra침a a menos que no
modifique los ficheros creados (N.T. del ingl칠s touched, haciendo referencia
a la orden touch, con la que fakeroot crea algunos ficheros vac칤os para
simular algunas situaciones) dentro del entorno fakeroot cuando est칠 fuera
del entorno. Aun as칤, esto puede ser 칰til. Por ejemplo, puede usarse con
rsync(1) para guardar y restaurar el 치rbol de directorios completo con la
informaci칩n de usuarios, grupos y dispositivos completa sin necesidad de ser
superusuario. Consulte \fI/usr/share/doc/fakeroot/README.saving\fP para m치s
detalles.
.TP 
\fB\-i\fP\fI\ fichero\-a\-cargar\fP
Carga un entorno fakeroot de fichero\-a\-cargar previamente salvado usando
\-s.  Note que esto no salva impl칤citamente el fichero, use tambi칠n \-s para
conseguir esto. Es seguro usar el mismo fichero para \-i y \-s en una misma
invocaci칩n de \fBfakeroot.\fP
.TP 
\fB\-u\fP, \fB\-\-unknown\-is\-real\fP
Usa el propietario real para ficheros desconocidos previamente por fakeroot
en vez de suponer que pertenecen a root:root.
.TP 
\fB\-b\fP\fI\ fd\fP
Especifica el descriptor de fichero base (s칩lo en modo TCP). Fd es el n칰mero
m칤nimo de descriptor de fichero a usar para las conexiones TCP, puede ser
importante para evitar conflictos con los descriptores de ficheros usados
por programas ejecut치ndose dentro de \fBfakeroot.\fP
.TP 
\fB\-h\fP
Muestra la ayuda.
.TP 
\fB\-v\fP
Muestra la versi칩n.

.SH EJEMPLOS
Aqu칤 hay un ejemplo de una sesi칩n con \fBfakeroot\fP.  Dese cuenta que dentro
de un entorno fakeroot la manipulaci칩n de ficheros que requiere privilegios
de superusuario se realiza con 칠xito, pero realmente no se lleva a cabo.
.CW
$  whoami
joost
$ fakeroot /bin/bash
#  whoami
root
# mknod hda3 b 3 1
# ls \-ld hda3
brw\-r\-\-r\-\-   1 root     root       3,   1 Jul  2 22:58 hda3
# chown joost:root hda3
# ls \-ld hda3
brw\-r\-\-r\-\-   1 joost    root       3,   1 Jul  2 22:58 hda3
# ls \-ld /
drwxr\-xr\-x  20 root     root         1024 Jun 17 21:50 /
# chown joost:users /
# chmod a+w /
# ls \-ld /
drwxrwxrwx  20 joost    users        1024 Jun 17 21:50 /
# exit
$ ls \-ld /
drwxr\-xr\-x  20 root     root         1024 Jun 17 21:50 //
$ ls \-ld hda3
\-rw\-r\-\-r\-\-   1 joost    users           0 Jul  2 22:58 hda3
.CE
S칩lo las operaciones que el usuario \fBjoost\fP puede hacer se llevan a cabo
realmente.

\fBfakeroot\fP se escribi칩 espec칤ficamente para permitir que los usuario
pudiesen crear paquetes (en el formato \fBdeb(5)\fP ) sin tener privilegios de
superusuario.  Esto puede hacerse con 칩rdenes como \fBdpkg\-buildpackage
\-rfakeroot\fP o \fBdebuild \-rfakeroot\fP (realmente, \-rfakeroot es predeterminado
en debuild en estos momentos, as칤 que no necesita el argumento).
.SH "ASPECTOS DE SEGURIDAD"
\fBfakeroot\fP es un programa normal, sin el bit setuid. No aumenta los
privilegios de un usuario ni disminuye la seguridad del sistema.
.SH FICHEROS
\fI/usr/lib/*/libfakeroot\-*.so\fP The shared library containing the wrapper
functions.
.SH ENTORNO
.IP \fBFAKEROOTKEY\fP
La llave usada para comunicarse con el demonio fakeroot. Cualquier programa
comenzado con el \fBLD_PRELOAD\fP correcto y la \fBFAKEROOTKEY\fP de un demonio en
ejecuci칩n conectar치 autom치ticamente con ese demonio, y tendr치 la misma
visi칩n "falsa" de los permisos/propietarios de los ficheros del
sistema. (sumiendo que el demonio y el programa que se conecta los ejecute
el mismo usuario).
.IP \fBLD_LIBRARY_PATH\fP
.IP \fBLD_PRELOAD\fP
Fakeroot est치 implementado envolviendo las llamadas al sistema. Esto se
realiza modificando las variables de entorno de forma que queden como
LD_LIBRARY_PATH=/usr/lib/fakeroot y LD_PRELOAD=libfakeroot.so.0. Esa
biblioteca se carga antes que la biblioteca de C del sistema, y de esa forma
se interceptan gran parte de las llamadas al sistema. Si necesita modificar
\fBLD_LIBRARY_PATH\fP o \fBLD_PRELOAD\fP dentro de un entorno fakeroot, deber치n
quedar establecidos de forma relativa, como en
\fBLD_LIBRARY_PATH=$LD_LIBRARY_PATH:/foo/bar/\fP

.SH LIMITACIONES
.IP "\fBVersiones de la biblioteca\fP"
Toda orden ejecutada con \fBfakeroot\fP necesita enlazarse con la misma versi칩n
de la biblioteca de C del mismo \fBfakeroot.\fP
.IP \fBopen()/create()\fP
fakeroot no envuelve open(), create(), etc. As칤, que si el usuario \fBjoost\fP
hace
.CW
touch tal
fakeroot
ls \-al tal
.CE
o del otro modo,
.CW
fakeroot
touch tal
ls \-al tal
.CE
fakeroot no puede saber en el primer caso que, el propietario de tal
realmente debe ser \fBjoost\fP mientras que en el segundo debe ser \fBroot\fP.
Para los paquetes Debian, dar a todos los ficheros "desconocidos" uid=gid=0
por omisi칩n, est치 siempre bien. La forma real de solucionar esto es envolver
\fBopen()\fP y \fBcreate()\fP, pero esto crea otros problemas, como demuestra el
paquete libtricks. Este paquete envuelve m치s funciones, e intenta hacer m치s
cosas que \fBfakeroot .\fP Se vio que una peque침a actualizaci칩n de libc (de una
donde la funci칩n \fBstat()\fP no usaba \fBopen()\fP a otra en la que \fBstat()\fP
usaba (en algunas ocasiones)  \fBopen()\fP), causaba violaciones de segmento
inexplicables (esto es, el \fBstat()\fP de libc6 llamaba el \fBopen()\fP envuelto,
que luego llamaba al \fBstat()\fP de libc6, etc). Arreglarlo no fue tan
dif칤cil, pero una vez arreglado, es cuesti칩n de tiempo antes de que otra
funci칩n empiece a usar open(), ni hablar de portarlo a otro sistema
operativo. As칤 que decid칤 reducir al m치ximo el n칰mero de funciones envuelta
por fakeroot, para limitar la probabilidad de \(oqcolisiones\(cq.
.IP "\fBGNU configure (y otros programas por el estilo)\fP"
fakeroot, en efecto, cambia el comportamiento del sistema. Los programas que
prueban el sistema, como GNU configure, pueden verse confundidos por esto (o
si no lo hacen, llevar치n a fakeroot tan al l칤mite que ser치 este el que se
confunda). As칤 que es aconsejable no ejecutar el objetivo "configure" en un
entorno fakeroot. Como configure debe ejecutarse en "debian/rules build",
"dpkg\-buildpackage \-rfakeroot" tiene cuidado de esto, haci칠ndolo
correctamente.
.SH FALLOS
No envuelve open(). Esto no es malo por si mismo, pero si un programa hace
open("fichero", O_WRONLY, 000), escribe en "fichero", lo cierra, y trata de
abrirlo de nuevo para leer el fichero, entonces falla al abrirlo, ya que el
modo del fichero ser치 000. El fallo es que si el superusuario hace lo mismo,
open()  ser치 satisfactorio, ya que los permisos del fichero no se comprueban
para el superusuario. Eleg칤 no envolver open(), ya que open() se usa en
muchas otras funciones de libc (incluso en aquellas que ya est치n envueltas),
de forma que se crean bucles (o posibles bucles futuros, cuando la
implementaci칩n de varias funciones de libc cambie ligeramente).
.SH COPIA
\fBfakeroot\fP se distribuye bajo la Licencia P칰blica General de GNU.  (GPL 2.0
o posterior).
.SH AUTORES
.TP 
joost witteveen
<\fIjoostje@debian.org\fP>
.TP 
Clint Adams
<\fIclint@debian.org\fP>
.TP 
Timo Savola
.SH TRADUCTOR
Traducci蚤 de Rub輹 Porras Campo <debian\-l10n\-spanish@lists.debian.org>
.SH "P츼GINA DEL MANUAL"
la mayor parte de J.H.M. Dassen <jdassen@debian.org> con muchas
modificaciones y a침adiduras de joost y Clint.
.SH "V칄ASE ADEM츼S"
\fBfaked\fP(1)  \fBdpkg\-buildpackage\fP(1), \fBdebuild\fP(1)
\fB/usr/share/doc/fakeroot/DEBUG\fP

